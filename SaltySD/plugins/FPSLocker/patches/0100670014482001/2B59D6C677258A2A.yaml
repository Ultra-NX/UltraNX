# Assassin's Creed: The Ezio Collection - Assassin's Creed Brotherhood 1.3
# BID: 2B59D6C677258A2A
# Scenes exclusively 2D are tied to framerate, so at 60 FPS they are 2x faster. 

DECLARATIONS:
  -
    type: variable
    name: dr_scale
    value_type: float
    default_value: 1
    evaluate: "FPS_TARGET / 30"

MASTER_WRITE:
# Patch code to multiply last frametime by float scale factor
# To match it to Dynamic Resolution calculations
  -
    type: asm_a64
    main_offset: 0xBDBE44
    instructions: [
      [adrp, x8, $dr_scale],
      [ldr, s0, [x8, $dr_scale]]
    ]
  -
    type: asm_a64
    main_offset: 0xBDBE58
    instructions: [
      [fmul, s0, s8, s0],
      [nop]
    ]
