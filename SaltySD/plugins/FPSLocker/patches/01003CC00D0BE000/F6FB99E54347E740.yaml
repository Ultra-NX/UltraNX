# Amnesia Collection 1.3.0
# BID: F6FB99E54347E740
# Double buffer is hardcoded line by line, it's hard to make it triple

unsafeCheck: true

MASTER_WRITE:
  # Redirect FPS Lock and Dynamic Resolution target values to MAIN + 0x21036F00
  -
    type: asm_a64
    main_offset: 0x13281C
    instructions: [
      [adrp, x8, 0x21036000],
      [ldr, x8, [x8, 0xf00]]
    ]
  -
    type: asm_a64
    main_offset: 0x3E324C
    instructions: [
      [adrp, x8, 0x21036000],
      [ldr, x8, [x8, 0xf00]]
    ]
  # NOP updating Dynamic Resolution target value
  -
    type: asm_a64
    main_offset: 0x2D94E8
    instructions: [
      [adrp, x9, 0x21036000],
      [ldr, w9, [x9, 0xf08]]
    ]
  -
    type: asm_a64
    main_offset: 0x597C5C
    instructions: [
      [adrp, x9, 0x21036000],
      [ldr, w9, [x9, 0xf08]]
    ]
  # Default values
  -
    type: bytes
    main_offset: 0x21036F00
    value_type: double
    value: 0.03333333333333333
  -
    type: bytes
    main_offset: 0x21036F08
    value_type: float
    value: 33.333333333333
ALL_FPS:
  # FPS Lock
  -
    type: evaluate_write
    address: [MAIN, 0x21036F00]
    value_type: double
    value: "1 / FPS_TARGET"
  -
    type: evaluate_write
    address: [MAIN, 0x21036F08]
    value_type: float

    value: FRAMETIME_TARGET
