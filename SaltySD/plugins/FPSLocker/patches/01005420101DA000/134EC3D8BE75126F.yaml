# The Legend of Heroes: Trails of Cold Steel III 1.0.1
# BID: 134EC3D8BE75126F
# Button polling is 2x more sensitive to holding any button at 60 FPS
# Fishing timer is decreasing 2x faster at 60 FPS
# Bike is turning 2x faster at 60 FPS

unsafeCheck: true

MASTER_WRITE:
  # Move loading FPS lock time to MAIN+0x2B31200
  -
    type: asm_a64
    main_offset: 0x511818
    instructions: [
      [adrp, x9, 0x2b31000],
      [ldr, w9, [x9, 0x200]]
    ]
  # Default value
  -
    type: bytes
    main_offset: 0x2B31200
    value_type: uint32
    value: 33333333
  # Write game's loop time as float to MAIN+0x2B31204
  -
    type: asm_a64
    main_offset: 0x511884
    instructions: [
      [b, 0x5117f4]
    ]
  -
    type: asm_a64
    main_offset: 0x5117F4
    instructions: [
      [str, d0, [x8, 0x20]],
      [fcvt, s4, d0],
      [b, 0x511a84]
    ]
  -
    type: asm_a64
    main_offset: 0x511A84
    instructions: [
      [adrp, x8, 0x2b31000],
      [str, s4, [x8, 0x204]],
      [b, 0x511888]
    ]
  - # Read lowest timing float factor from MAIN+0x2B31204
    type: asm_a64
    main_offset: 0x5E5EC
    instructions: [
      [adrp, x8, 0x2b31000],
      [fminnm, s1, s1, s2],
      [ldr, s2, [x8, 0x204]]
    ]
  - # Default value
    type: bytes
    main_offset: 0x2B31204
    value_type: float
    value: 0.0333333333
ALL_FPS:
  -
    type: evaluate_write
    address: [MAIN, 0x2B31200]
    value_type: uint32
    value: 11111111

